const g={debug:!1,inview:!1,elements:{wraps:null,instances:[]},settings:{duration:.75,ease:"power4.inOut",scrollAmount:.9,scrollDistance:40,textEase:"power4.out",textDuration:.4,stagger:.1,clipPathRadius:"12px"},mount(){this.initElements(),this.initStickyFeatures(),ScrollTrigger.refresh()},initElements(){if(this.elements.wraps=this.$("[data-sticky-feature-wrap]"),!this.elements.wraps.length){this.log("No sticky feature wraps found","warn");return}this.elements.instances=Array.from(this.elements.wraps).map(t=>{const e=Array.from(t.querySelectorAll("[data-sticky-feature-visual-wrap]")),s=Array.from(t.querySelectorAll("[data-sticky-feature-item]")),i=t.querySelector("[data-sticky-feature-progress]");return{wrap:t,visualWraps:e,items:s,progressBar:i,count:Math.min(e.length,s.length)}})},initStickyFeatures(){if(!this.elements.instances.length)return;const e=window.matchMedia("(prefers-reduced-motion: reduce)").matches?.01:this.settings.duration;this.elements.instances.forEach(s=>{this.setupInstance(s,e)})},setupInstance(t,e){const{wrap:s,visualWraps:i,items:a,progressBar:r,count:n}=t;if(n<1){this.log("Instance has no valid items","warn",{wrap:s});return}i.length!==a.length&&this.log("Visual wraps and items count mismatch","warn",{visualWraps:i.length,items:a.length,wrap:s}),this.initializeFirstItem(i,a),this.createScrollTrigger(s,i,a,r,n,e)},initializeFirstItem(t,e){t[0]&&gsap.set(t[0],{clipPath:`inset(0% round ${this.settings.clipPathRadius})`}),gsap.set(e[0],{autoAlpha:1})},createScrollTrigger(t,e,s,i,a,r){let n=0;const l=Math.max(1,a-1),h=!window.matchMedia("(hover: hover)").matches;ScrollTrigger.create({trigger:t,start:"center center",end:()=>`+=${l*this.settings.scrollDistance}%`,pin:!0,scrub:!0,invalidateOnRefresh:!0,onUpdate:u=>{const c=Math.min(u.progress,this.settings.scrollAmount)/this.settings.scrollAmount,o=Math.max(0,Math.min(l,Math.floor(c*l+1e-6)));gsap.to(i,{scaleX:c,ease:"none"}),o!==n&&(this.transitionItems(e,s,n,o,r,h),n=o)}}),ScrollTrigger.refresh()},transitionItems(t,e,s,i,a,r=!1){if(s===i)return;const n=gsap.timeline({defaults:{overwrite:"auto"}});s<i?n.to(t[i],{clipPath:`inset(0% round ${this.settings.clipPathRadius})`,duration:a,ease:this.settings.ease},0):n.to(t[s],{clipPath:`inset(50% round ${this.settings.clipPathRadius})`,duration:a,ease:this.settings.ease},0),r?(this.animateOut(e[s]),this.animateIn(e[i],a)):(this.animateOut(e[s]),this.animateIn(e[i],a))},animateOut(t){const e=this.getTextElements(t);gsap.to(e,{autoAlpha:0,y:-30,ease:this.settings.textEase,duration:this.settings.textDuration,onComplete:()=>gsap.set(t,{autoAlpha:0})})},animateIn(t,e){const s=this.getTextElements(t);gsap.set(t,{autoAlpha:1}),gsap.fromTo(s,{autoAlpha:0,y:30},{autoAlpha:1,y:0,ease:this.settings.textEase,duration:e,stagger:this.settings.stagger})},getTextElements(t){return Array.from(t.querySelectorAll("[data-sticky-feature-text]"))}};typeof window<"u"&&(window.blockRegistry||(window.blockRegistry={}),window.blockRegistry["list-scroll-reveal"]={default:g});
